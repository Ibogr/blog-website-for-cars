<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Include shared head partial (meta tags, CSS, JS links) -->
    <%- include('../partials/head') %>
</head>

<body>

    <!-- Include shared navigation bar partial -->
    <%- include('../partials/nav') %>

    <div class="container mt-4">
        <div class="row">
            <div class="col-md-12">

                <!-- Loop through blogs to display edit form for each -->
                <% blogs.forEach(blog => { %>
                    <form method="POST" enctype="multipart/form-data">
                        
                        <!-- Hidden fields to store old image and blog ID -->
                        <input type="hidden" name="oldImage" value="<%= blog.image %>">
                        <input type="text" name="blogID" value="<%= blog.blogId %>">

                        <!-- Title input -->
                        <div class="row mb-3">
                            <label for="baslik" class="col-sm-2 col-form-label">Title:</label>
                            <div class="col-sm-8">
                                <input type="text" name="title" id="title" class="form-control"
                                    value="<%= blog.title %>">
                            </div>
                        </div>

                        <!-- Brief textarea -->
                        <div class="row mb-3">
                            <label for="brief" class="col-sm-2 col-form-label">Brief:</label>
                            <div class="col-sm-8">
                                <textarea name="brief" class="form-control" rows="5"><%= blog.brief %></textarea>
                            </div>
                        </div>

                        <!-- Description textarea -->
                        <div class="row mb-3">
                            <label for="description" class="col-sm-2 col-form-label">Description:</label>
                            <div class="col-sm-8">
                                <textarea name="description" class="form-control" rows="10"><%= blog.description %></textarea>
                            </div>
                        </div>

                        <!-- Image upload input -->
                        <div class="row mb-3">
                            <label for="image" class="col-sm-2 col-form-label">Image:</label>
                            <div class="col-sm-8">
                                <input type="file" name="image" class="form-control" value="<%= blog.image %>">
                            </div>
                        </div>

                        <!-- Type/Category select -->
                        <div class="row mb-3">
                            <label for="type" class="col-sm-2 col-form-label">Type:</label>
                            <div class="col-sm-8">
                                <select name="type" class="form-select" id="type">
                                    <!-- Current blog type preselected -->
                                    <option value="" selected><%= blog.type %></option>

                                    <!-- Loop through categories for selection -->
                                    <% categories.forEach(category => { %>
                                        <option value="<%= category.name %>"><%= category.name %></option>
                                    <% }) %>
                                </select>
                            </div>
                        </div>

                        <!-- Checkboxes for indexPage and home flags -->
                        <div class="row mb-3">
                            <div class="col-sm-10 offset-sm-2">
                                <div class="form-check">
                                    <input type="checkbox" class="form-check-input" id="indexPage" name="indexPage"
                                        <%= blog.indexPage ? "checked" : "" %>>
                                    <label for="indexPage" class="form-check-label">Blog</label>
                                </div>
                                <div class="form-check">
                                    <input type="checkbox" class="form-check-input" id="home" name="home"
                                        <%= blog.home ? "checked" : "" %>>
                                    <label for="home" class="form-check-label">Home</label>
                                </div>
                            </div>
                        </div>

                        <!-- Submit button -->
                        <div class="row mb-3">
                            <div class="col-sm-10 offset-sm-2">
                                <div class="form-check">
                                    <button type="submit" class="btn btn-primary">kaydet</button>
                                </div>
                            </div>
                        </div>

                    </form>
                <% }) %>

            </div>
        </div>
    </div>
</body>

</html>
